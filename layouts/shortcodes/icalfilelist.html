{{ $calendars := site.Data.ical.calendars }}
{{ range $cal := $calendars }}
  <div style="margin-bottom: 2em;">
    <p><strong>{{ $cal.file }}</strong></p>
    <p>{{ $cal.description }}</p>
    <div style="display: flex; gap: 0.5em; align-items: center;">
      <input id="input-{{ $cal.file }}" type="text"
             value="{{ site.BaseURL }}ical/{{ $cal.file }}"
             readonly
             style="flex: 1; font-family: monospace; padding: 0.5em; border-radius: 6px; border: 1px solid #ccc;" />
      <button onclick="copyToClipboard('input-{{ $cal.file }}', this)"
              style="padding: 0.5em 1em; border-radius: 6px; border: none; background-color: #007aff; color: white; font-weight: 500; cursor: pointer;">
        Copy
      </button>
    </div>
    <div class="copy-feedback" style="font-size: 0.85em; color: #28a745; display: none; margin-top: 0.25em;">
      Copied to clipboard âœ“
    </div>
  </div>
{{ end }}

<script>
function copyToClipboard(inputId, button) {
  const input = document.getElementById(inputId);
  input.select();
  input.setSelectionRange(0, 99999); // For mobile devices
  navigator.clipboard.writeText(input.value).then(() => {
    const feedback = button.parentElement.nextElementSibling;
    feedback.style.display = 'block';
    setTimeout(() => {
      feedback.style.display = 'none';
    }, 2000);
  });
}
</script>